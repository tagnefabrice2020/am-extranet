"use strict";(self.webpackChunkextranet_ui=self.webpackChunkextranet_ui||[]).push([[993],{7669:function(e,r,t){t.d(r,{Gl:function(){return y},uh:function(){return v},pz:function(){return j},w2:function(){return p},YA:function(){return f},gE:function(){return m},c7:function(){return g},XZ:function(){return N},Bu:function(){return P},zj:function(){return b}});var n=t(577),s=t(5671),a=t(3144),i=t(4569),c=t.n(i),u=t(3197),l=new(function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"fetchUsers",value:function(e,r){return c().get(u.T+"/users?page=".concat(e,"&perPage=").concat(r)).then((function(e){return e.data.data}))}},{key:"store",value:function(e){return c().post(u.T+"/users",e).then((function(e){return e}))}},{key:"search",value:function(e,r,t){return c().get(u.T+"/users/".concat(e,"/search?page=").concat(r,"&perPage=").concat(t)).then((function(e){return e.data.data}))}},{key:"switchStatus",value:function(e){return c().patch(u.T+"/users/".concat(e,"/status")).then((function(e){return e}))}},{key:"fetchOneUser",value:function(e){return c().get(u.T+"/users/".concat(e,"/show")).then((function(e){return e.data.user}))}},{key:"updateUser",value:function(e,r){return c().patch(u.T+"/users/".concat(r,"/update"),e).then((function(e){return e}))}}]),e}()),o=t(1801),d=function(e){return{type:o.zy,payload:e}},m=function(e){return{type:o.Hc,payload:e}},f=function(e){return{type:o.Wc,payload:e}},h=function(e){return{type:o.fg,payload:e}},p=function(e){return{type:o.MS,payload:e}},x=function(e,r){return{type:o.B0,payload:e,last_page:r}},v=function(e,r){return function(t,n){var s=n().users;t({type:o.gx}),s.searchValue.length<=0&&l.fetchUsers(e,r).then((function(e){var r=Math.ceil(e.total/e.per_page);return t(f(e.current_page)),t(m(e.per_page)),t(h(r)),t(function(e){return{type:o.aZ,payload:e}}(e.data,e.last_page)),Promise.resolve()}),(function(e){return t(d(e.message)),Promise.reject()}))}},j=function(e,r){return function(t,n){var s,a=n().users;a.searchValue.length>0?l.search(a.searchValue,e,r).then((function(e){var r=Math.ceil(e.total/e.per_page);return t(f(e.current_page)),t(m(e.per_page)),t(h(r)),t(x(e.data)),Promise.resolve()}),(function(e){return t(d(e.message)),Promise.reject()})):(t((s=a.initialUsers,{type:o.td,payload:s})),t(h(a.initialTotalPages)))}},g=function(e){return function(r){r({type:o.NF}),l.store(e).then((function(e){if("string"===typeof e.data&&"success"===e.data)return r({type:o.ti}),n.Am.success("Utilisateur ajouter avec suc\xe8ss."),Promise.resolve()}),(function(e){return n.Am.error("La sauvegarde de l'utilisateur a \xe9chou\xe9e."),Promise.reject()}))}},y=function(e){return function(r){r({type:o.oJ}),l.fetchOneUser(e).then((function(e){return r(function(e){return{type:o.Pf,payload:e}}(e)),Promise.resolve()}),(function(e){r({type:o.qw}),n.Am.error("Impossible de charger les information de l'utilisateur.")}))}},N=function(e){return function(r){l.switchStatus(e).then((function(t){201===t.status&&(r(function(e){return{type:o.eG,payload:e}}(e)),n.Am.success("Le status de l'utilisateur a \xe9t\xe9 changer."))}),(function(e){n.Am.error("Le status de l'utilisateur n'a pas \xe9t\xe9 changer.")}))}},b=function(e,r){return function(t){l.updateUser(e,r).then((function(e){200===e.status&&n.Am.success("L'utilisateur enregistrer avec sucess.")}),(function(e){console.log(e)}))}},P=function(e){return function(r,t){console.log(e);var n=t();r(x({})),console.log(n)}}},2993:function(e,r,t){t.r(r);var n=t(1413),s=t(5861),a=t(7757),i=t.n(a),c=t(2791),u=t(1134),l=t(9860),o=t(1265),d=t(7669),m=t(7581),f=t(4569),h=t.n(f),p=t(3197),x=t(184),v=(0,l.Ry)({firstname:(0,l.Z_)().required("Veuillez saisir votre Pr\xe9nom").typeError("Veuillez saisir des characters alphabetic."),lastname:(0,l.Z_)().required("Veuillez saisir votre Nom").typeError("Veuillez saisir des characters alphabetic."),email:(0,l.Z_)().email("Veuillez entrer une adresse email valid.").required("Veuillez entre votre email.").typeError("Veuillez entrer une adresse email valid.").test("check-if-user-exist","Il exist d\xe9j\xe0 un client avec cette email.",function(){var e=(0,s.Z)(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0===r.length?"empty":r,e.next=3,h().get(p.T+"/check-if-email-exist/".concat(r));case 3:return t=e.sent,e.abrupt("return",1!==t.data);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),role:(0,l.nK)().oneOf(["1","3","2","4"],"Vous devez choisir parmis les options prescrit.").required("Veuillez choisir une option.").typeError("Vous devez choisir parmis les options prescrit.")});r.default=(0,m.$j)((function(e){return{users:e.users}}),(function(e){return{storeUser:function(r){return e((0,d.c7)(r))}}}))((function(e){var r=e.storeUser,t=e.users,s=(0,u.cI)({mode:"unTouched",resolver:(0,o.X)(v)}),a=s.register,i=s.formState,l=s.reset,d=s.handleSubmit,m=i.errors,f=i.isSubmitting;(0,c.useEffect)((function(){t.reset.form&&l()}),[t.reset.form,l]);return(0,x.jsxs)("div",{className:"content-wrapper",children:[(0,x.jsx)("section",{className:"content-header",children:(0,x.jsx)("div",{className:"container-fluid",children:(0,x.jsxs)("div",{className:"row mb-2",children:[(0,x.jsx)("div",{className:"col-sm-6",children:(0,x.jsx)("h1",{children:"Ajouter un Utilisateur"})}),(0,x.jsx)("div",{className:"col-sm-6",children:(0,x.jsxs)("ol",{className:"breadcrumb float-sm-right",children:[(0,x.jsx)("li",{className:"breadcrumb-item active",children:"Utilisateur"}),(0,x.jsx)("li",{className:"breadcrumb-item active",children:"Ajouter un Utilisateur"})]})})]})})}),(0,x.jsx)("section",{className:"content",children:(0,x.jsx)("div",{className:"container-fluid",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("div",{className:"card-header",children:(0,x.jsx)("h3",{className:"card-title",children:"Ajouter un Utilisateur"})}),(0,x.jsxs)("form",{onSubmit:d((function(e){r(e)})),children:[(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Pr\xe9nom"}),(0,x.jsx)("input",(0,n.Z)({type:"firstname",className:"form-control "+(m.firstname&&" is-border-red"),placeholder:"Pr\xe9nom de l'utilisateur"},a("firstname"))),m.firstname&&(0,x.jsx)("small",{className:"form-text is-red",children:m.firstname.message})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nom"}),(0,x.jsx)("input",(0,n.Z)({type:"lastname",className:"form-control "+(m.lastname&&"is-border-red"),placeholder:"Nom de l'utilisateur"},a("lastname"))),m.lastname&&(0,x.jsx)("small",{className:"form-text is-red",children:m.lastname.message})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email"}),(0,x.jsx)("input",(0,n.Z)({type:"email",className:"form-control "+(m.email&&"is-border-red"),placeholder:"Entre votre email"},a("email"))),m.email&&(0,x.jsx)("small",{className:"form-text is-red",children:m.email.message})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Role"}),(0,x.jsxs)("select",(0,n.Z)((0,n.Z)({className:"form-control "+(m.role&&"is-border-red")},a("role")),{},{children:[(0,x.jsx)("option",{value:"1",children:"Administrateur"}),(0,x.jsx)("option",{value:"2",children:"Agent"}),(0,x.jsx)("option",{value:"3",children:"Client"}),(0,x.jsx)("option",{value:"4",children:"Salari\xe9"})]})),m.role&&(0,x.jsx)("small",{className:"form-text text-muted is-danger",children:m.role.message})]})]}),(0,x.jsx)("div",{className:"card-footer",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Sauvegarde en cours...":"Enregistrer"})})]})]})})})})})]})}))}}]);
//# sourceMappingURL=993.6cc6326c.chunk.js.map