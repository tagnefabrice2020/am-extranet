"use strict";(self.webpackChunkextranet_ui=self.webpackChunkextranet_ui||[]).push([[282],{2039:function(e,n,s){var t=s(184);n.Z=function(e){var n=e.currentPage,s=e.onPageChange,r=(e.itemsPerPage,e.length);return(0,t.jsxs)("ul",{className:"pagination mb-3",style:{margin:"0 auto",width:"300px",display:"flex",justifyContent:"center"},children:[(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("button",{className:"page-link",style:{border:"1px solid",borderRight:"none"},onClick:function(){return s(n-1)},disabled:1===n,children:"\xab"})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:n})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:" Sur "})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{className:"page-link",children:0===r?1:r})}),(0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("button",{className:"page-link",style:{border:"1px solid",borderLeft:"none"},onClick:function(){s(n+1)},disabled:n===r||0===r,children:"\xbb"})})]})}},8138:function(e,n,s){s.d(n,{Z:function(){return r}});s(2791);var t=s(184),r=function(){return(0,t.jsxs)("table",{cellPadding:"0",cellSpacing:"0",width:"100%",className:"w3samples_table_loader",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("th",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("th",{className:"col5",children:(0,t.jsx)("span",{})})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"col1",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col4",children:(0,t.jsx)("span",{})}),(0,t.jsx)("td",{className:"col5",children:(0,t.jsx)("span",{})})]})]})]})}},7669:function(e,n,s){s.d(n,{Gl:function(){return v},uh:function(){return j},pz:function(){return g},w2:function(){return f},YA:function(){return p},gE:function(){return h},c7:function(){return N},XZ:function(){return y},Bu:function(){return P},zj:function(){return b}});var t=s(577),r=s(5671),a=s(3144),c=s(4569),i=s.n(c),l=s(3197),u=new(function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"fetchUsers",value:function(e,n){return i().get(l.T+"/users?page=".concat(e,"&perPage=").concat(n)).then((function(e){return e.data.data}))}},{key:"store",value:function(e){return i().post(l.T+"/users",e).then((function(e){return e}))}},{key:"search",value:function(e,n,s){return i().get(l.T+"/users/".concat(e,"/search?page=").concat(n,"&perPage=").concat(s)).then((function(e){return e.data.data}))}},{key:"switchStatus",value:function(e){return i().patch(l.T+"/users/".concat(e,"/status")).then((function(e){return e}))}},{key:"fetchOneUser",value:function(e){return i().get(l.T+"/users/".concat(e,"/show")).then((function(e){return e.data.user}))}},{key:"updateUser",value:function(e,n){return i().patch(l.T+"/users/".concat(n,"/update"),e).then((function(e){return e}))}}]),e}()),o=s(1801),d=function(e){return{type:o.zy,payload:e}},h=function(e){return{type:o.Hc,payload:e}},p=function(e){return{type:o.Wc,payload:e}},x=function(e){return{type:o.fg,payload:e}},f=function(e){return{type:o.MS,payload:e}},m=function(e,n){return{type:o.B0,payload:e,last_page:n}},j=function(e,n){return function(s,t){var r=t().users;s({type:o.gx}),r.searchValue.length<=0&&u.fetchUsers(e,n).then((function(e){var n=Math.ceil(e.total/e.per_page);return s(p(e.current_page)),s(h(e.per_page)),s(x(n)),s(function(e){return{type:o.aZ,payload:e}}(e.data,e.last_page)),Promise.resolve()}),(function(e){return s(d(e.message)),Promise.reject()}))}},g=function(e,n){return function(s,t){var r,a=t().users;a.searchValue.length>0?u.search(a.searchValue,e,n).then((function(e){var n=Math.ceil(e.total/e.per_page);return s(p(e.current_page)),s(h(e.per_page)),s(x(n)),s(m(e.data)),Promise.resolve()}),(function(e){return s(d(e.message)),Promise.reject()})):(s((r=a.initialUsers,{type:o.td,payload:r})),s(x(a.initialTotalPages)))}},N=function(e){return function(n){n({type:o.NF}),u.store(e).then((function(e){if("string"===typeof e.data&&"success"===e.data)return n({type:o.ti}),t.Am.success("Utilisateur ajouter avec suc\xe8ss."),Promise.resolve()}),(function(e){return t.Am.error("La sauvegarde de l'utilisateur a \xe9chou\xe9e."),Promise.reject()}))}},v=function(e){return function(n){n({type:o.oJ}),u.fetchOneUser(e).then((function(e){return n(function(e){return{type:o.Pf,payload:e}}(e)),Promise.resolve()}),(function(e){n({type:o.qw}),t.Am.error("Impossible de charger les information de l'utilisateur.")}))}},y=function(e){return function(n){u.switchStatus(e).then((function(s){201===s.status&&(n(function(e){return{type:o.eG,payload:e}}(e)),t.Am.success("Le status de l'utilisateur a \xe9t\xe9 changer."))}),(function(e){t.Am.error("Le status de l'utilisateur n'a pas \xe9t\xe9 changer.")}))}},b=function(e,n){return function(s){u.updateUser(e,n).then((function(e){200===e.status&&t.Am.success("L'utilisateur enregistrer avec sucess.")}),(function(e){console.log(e)}))}},P=function(e){return function(n,s){console.log(e);var t=s();n(m({})),console.log(t)}}},3282:function(e,n,s){s.r(n);var t=s(5861),r=s(7757),a=s.n(r),c=s(2791),i=s(7581),l=s(3504),u=s(2039),o=s(8138),d=s(7669),h=s(184);n.default=(0,i.$j)((function(e){return{users:e.users}}),(function(e){return{fetchUsers:function(n,s){return e((0,d.uh)(n,s))},setUsersPerPage:function(n){return e((0,d.gE)(n))},setPage:function(n){return e((0,d.YA)(n))},searching:function(n){return e((0,d.w2)(n))},searchUsers:function(n,s){return e((0,d.pz)(n,s))},switchUserStatus:function(n){return e((0,d.XZ)(n))},test:function(){return e((0,d.Bu)())}}}))((function(e){var n=e.fetchUsers,s=e.users,r=e.searchUsers,i=e.setUsersPerPage,d=e.setPage,p=e.searching,x=e.switchUserStatus;e.test;(0,c.useEffect)((function(){if(s.searchValue.length>0){var e=setTimeout((function(){r(s.currentPage,parseInt(s.perPage))}),1500);return function(){return clearTimeout(e)}}n(s.currentPage,parseInt(s.perPage))}),[s.perPage,s.currentPage,n,r,s.searchValue]),(0,c.useEffect)((function(){var e=setTimeout((function(){r(s.currentPage,parseInt(s.perPage))}),1500);return function(){return clearTimeout(e)}}),[s.searchValue,s.currentPage,r,s.perPage]);var f=function(e){x(e)};return(0,h.jsxs)("div",{className:"content-wrapper",children:[(0,h.jsxs)("div",{className:"content-header",children:[(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsxs)("div",{className:"row mb-2",children:[(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsx)("h1",{className:"m-0",children:"Listes d'utilisateurs"})})," ",(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsxs)("ol",{className:"breadcrumb float-sm-right",children:[(0,h.jsx)("li",{className:"breadcrumb-item",children:"Utilisateurs"}),(0,h.jsx)("li",{className:"breadcrumb-item active",children:"List"})]})})," "]})," "]})," "]}),(0,h.jsx)("section",{className:"content",children:(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col-12",children:[(0,h.jsxs)("div",{className:"card",children:[(0,h.jsxs)("div",{className:"card-header",children:[(0,h.jsx)("h3",{className:"card-title",children:(0,h.jsxs)("select",{className:"form-control",style:{padding:"0.175rem",height:"calc(1.8125rem + 2px)"},onChange:function(e){i(e.target.value),d(1)},children:[(0,h.jsx)("option",{value:"5",children:"5"}),(0,h.jsx)("option",{value:"10",children:"10"}),(0,h.jsx)("option",{value:"15",children:"15"})]})}),(0,h.jsx)("div",{className:"card-tools",children:(0,h.jsxs)("div",{className:"input-group input-group-sm",style:{width:"150px"},children:[(0,h.jsx)("input",{type:"text",name:"table_search",className:"form-control float-right",placeholder:"Recherche",onChange:function(){var e=(0,t.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(n.target.value),d(1);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),(0,h.jsx)("div",{className:"input-group-append",children:(0,h.jsxs)("button",{type:"submit",className:"btn btn-default",children:[!s.searching&&(0,h.jsx)("i",{className:"fas fa-search"}),s.searching&&(0,h.jsx)("div",{className:"spinner-border",role:"status",children:(0,h.jsx)("span",{className:"sr-only"})})]})})]})})]}),(0,h.jsxs)("div",{className:"card-body table-responsive p-0",children:[s.loading&&(0,h.jsx)(o.Z,{}),!s.loading&&s.users.length>0&&(0,h.jsxs)("table",{className:"table table-head-fixed text-nowrap",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{}),(0,h.jsx)("th",{children:(0,h.jsx)("em",{children:"Nom"})}),(0,h.jsx)("th",{children:"Email"}),(0,h.jsx)("th",{children:"Role"}),(0,h.jsx)("th",{}),(0,h.jsx)("th",{})]})}),(0,h.jsx)("tbody",{children:s.users.map((function(e,n){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:s.currentPage*s.perPage-s.perPage+n+1}),(0,h.jsxs)("td",{children:[e.first_name," ",e.last_name]}),(0,h.jsx)("td",{children:e.email}),(0,h.jsxs)("td",{children:[" ",(0,h.jsx)("span",{className:"badge ".concat("administrateur"===e.role?"badge-primary":"agent"===e.role?"badge-info":"client"===e.role?"badge-success":"salari\xe9"===e.role?"badge-dark":null," "),children:e.role})]}),(0,h.jsx)("td",{children:(0,h.jsx)(l.rU,{to:"/modifier/".concat(e.uuid,"/utilisateur"),children:(0,h.jsx)("i",{className:"bi bi-pencil-square",style:{color:"#000"}})})}),(0,h.jsx)("td",{children:e.active?(0,h.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return f(e.uuid)},children:"desactiver"}):(0,h.jsx)("button",{className:"btn btn-sm btn-success",onClick:function(){return f(e.uuid)},children:"activer"})})]},n)}))})]}),!s.loading&&0===s.users.length&&s.totalPages<=0&&(0,h.jsx)("div",{style:{margin:"0 auto",maxWidth:"900px",padding:"20px"},children:(0,h.jsx)("em",{style:{color:"red",textAlign:"center",fontSize:"30px"},children:"Oops aucun utilisateur n'a \xe9t\xe9 trouver dans la base de don\xe9es!."})})]})]}),!s.loading&&s.users.length>0&&(0,h.jsx)(u.Z,{currentPage:s.currentPage,onPageChange:d,itemsPerPage:s.perPage,length:s.totalPages})]})})})})]})}))}}]);
//# sourceMappingURL=282.5ecc8c3b.chunk.js.map