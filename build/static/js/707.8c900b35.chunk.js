"use strict";(self.webpackChunkextranet_ui=self.webpackChunkextranet_ui||[]).push([[707],{8707:function(e,a,r){r.r(a),r.d(a,{default:function(){return _}});var t=r(1413),s=r(5861),l=r(885),n=r(7757),i=r.n(n),o=r(4569),c=r.n(o),d=r(2791),m=r(1134),u=r(9860),p=r(3197),h=r(1265),x=r(4802),v=r(4045),f=r(184),j=function(e){var a=e.csvData,r=e.fileName;return(0,f.jsx)("button",{className:"ml-2 btn btn-success",onClick:function(e){return function(e,a){var r={Sheets:{data:v.P6.json_to_sheet(e)},SheetNames:["data"]},t=v.cW(r,{bookType:"xlsx",type:"array"}),s=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});x.saveAs(s,a+".xlsx")}(a,r)},children:"Exporter"})},_=function(){var e=(0,d.useState)(""),a=(0,l.Z)(e,2),r=a[0],n=a[1],o=(0,d.useState)([]),x=(0,l.Z)(o,2),v=x[0],_=x[1],N=(0,d.useState)(!1),b=(0,l.Z)(N,2),y=b[0],g=b[1],w="interval"===r?(0,u.Ry)({from:(0,u.hT)().required("La date est information requise!").typeError("Veuillez inserer une date!").max(new Date),to:(0,u.hT)().required("La date est information requise!").typeError("Veuillez inserer une date!")}):(0,u.Ry)({date:(0,u.hT)().required("La date est information requise!").typeError("Veuillez inserer une date!").max(new Date)}),E=(0,m.cI)({mode:"unTouched",resolver:(0,h.X)(w)}),S=E.register,D=E.formState,T=E.handleSubmit,k=E.watch,Z=(v.map((function(e){return[{value:e.ref_lot},{value:e.ref_rdv_edl},{value:e.type},{value:e.property_category},{value:e.date_rdv},{value:e.first_name},{value:e.nom_du_passeur},{value:e.agent},{value:e.tenant_last_name},{value:e.tenant_first_name},{value:e.tenant_contact},{value:e.tenant_email},{value:e.aceint_tenant_info},{value:e.property_surface_area},{value:e.property_type},{value:e.property_floor_number},{value:e.property_housing_number},{value:e.property_cave_number},{value:e.property_addresse},{value:e.property_postal_code},{value:e.property_city},{value:e.date},{value:e.lanlord_last_name},{value:e.lanlord_first_name}]})),D.errors),q=D.isSubmitting,C=k("from"),I=function(){var e=(0,s.Z)(i().mark((function e(a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),_([]),e.next=4,c().post(p.T+"/export/appointments",a).then((function(e){console.log(e),_(e.data),g(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"content-wrapper",children:[(0,f.jsx)("section",{className:"content-header",children:(0,f.jsx)("div",{className:"container-fluid",children:(0,f.jsxs)("div",{className:"row mb-2",children:[(0,f.jsx)("div",{className:"col-sm-6",children:(0,f.jsx)("h1",{children:"Exporter"})}),(0,f.jsx)("div",{className:"col-sm-6",children:(0,f.jsx)("ol",{className:"breadcrumb float-sm-right",children:(0,f.jsx)("li",{className:"breadcrumb-item active",children:"Exporter"})})})]})})}),(0,f.jsx)("section",{className:"content",children:(0,f.jsx)("div",{className:"container-fluid",children:(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-md-12",children:(0,f.jsxs)("div",{className:"card",children:[(0,f.jsx)("div",{className:"card-header",children:(0,f.jsx)("h3",{className:"card-title",children:"Exporter"})}),(0,f.jsxs)("form",{onSubmit:T(I),children:[(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Date Type"}),(0,f.jsxs)("select",{className:"form-control "+(Z.date_type&&"is-border-red"),onChange:function(e){n(e.target.value),_([])},children:[(0,f.jsx)("option",{children:"-- Selectioner le type date d'export"}),(0,f.jsx)("option",{value:"interval",children:"Interval"})]})]}),"interval"===r&&(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col",children:(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"exampleInputEmail1",children:"De"}),(0,f.jsx)("input",(0,t.Z)({type:"date",className:"form-control "+(Z.from&&"is-border-red")},S("from"))),Z.from&&(0,f.jsx)("small",{className:"form-text is-red",children:Z.from.message})]})}),(0,f.jsx)("div",{className:"col",children:(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"exampleInputEmail1",children:"A"}),(0,f.jsx)("input",(0,t.Z)({type:"date",min:C,disabled:"undefined"==C||null==C,className:"form-control "+(Z.to&&"is-border-red")},S("to"))),Z.to&&(0,f.jsx)("small",{className:"form-text is-red",children:Z.to.message})]})})]}),"daily"===r&&(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Date"}),(0,f.jsx)("input",(0,t.Z)({type:"date",className:"form-control "+(Z.date&&"is-border-red")},S("date"))),Z.date&&(0,f.jsx)("small",{className:"form-text is-red",children:Z.date.message})]})]}),(0,f.jsxs)("div",{className:"card-footer",children:[(0,f.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:q,children:q?"Chargement en cours...":"Charger"}),!y&&v.length>0&&(0,f.jsx)(j,{csvData:v,fileName:new Date})]})]})]})})})})})]})}}}]);
//# sourceMappingURL=707.8c900b35.chunk.js.map