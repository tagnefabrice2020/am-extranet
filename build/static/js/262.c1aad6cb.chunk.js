"use strict";(self.webpackChunkextranet_ui=self.webpackChunkextranet_ui||[]).push([[262],{7669:function(e,n,r){r.d(n,{Gl:function(){return y},uh:function(){return v},pz:function(){return g},w2:function(){return p},YA:function(){return f},gE:function(){return m},c7:function(){return j},XZ:function(){return b},Bu:function(){return U},zj:function(){return N}});var t=r(577),s=r(5671),a=r(3144),i=r(4569),l=r.n(i),c=r(3197),o=new(function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"fetchUsers",value:function(e,n){return l().get(c.T+"/users?page=".concat(e,"&perPage=").concat(n)).then((function(e){return e.data.data}))}},{key:"store",value:function(e){return l().post(c.T+"/users",e).then((function(e){return e}))}},{key:"search",value:function(e,n,r){return l().get(c.T+"/users/".concat(e,"/search?page=").concat(n,"&perPage=").concat(r)).then((function(e){return e.data.data}))}},{key:"switchStatus",value:function(e){return l().patch(c.T+"/users/".concat(e,"/status")).then((function(e){return e}))}},{key:"fetchOneUser",value:function(e){return l().get(c.T+"/users/".concat(e,"/show")).then((function(e){return e.data.user}))}},{key:"updateUser",value:function(e,n){return l().patch(c.T+"/users/".concat(n,"/update"),e).then((function(e){return e}))}}]),e}()),u=r(1801),d=function(e){return{type:u.zy,payload:e}},m=function(e){return{type:u.Hc,payload:e}},f=function(e){return{type:u.Wc,payload:e}},h=function(e){return{type:u.fg,payload:e}},p=function(e){return{type:u.MS,payload:e}},x=function(e,n){return{type:u.B0,payload:e,last_page:n}},v=function(e,n){return function(r,t){var s=t().users;r({type:u.gx}),s.searchValue.length<=0&&o.fetchUsers(e,n).then((function(e){var n=Math.ceil(e.total/e.per_page);return r(f(e.current_page)),r(m(e.per_page)),r(h(n)),r(function(e){return{type:u.aZ,payload:e}}(e.data,e.last_page)),Promise.resolve()}),(function(e){return r(d(e.message)),Promise.reject()}))}},g=function(e,n){return function(r,t){var s,a=t().users;a.searchValue.length>0?o.search(a.searchValue,e,n).then((function(e){var n=Math.ceil(e.total/e.per_page);return r(f(e.current_page)),r(m(e.per_page)),r(h(n)),r(x(e.data)),Promise.resolve()}),(function(e){return r(d(e.message)),Promise.reject()})):(r((s=a.initialUsers,{type:u.td,payload:s})),r(h(a.initialTotalPages)))}},j=function(e){return function(n){n({type:u.NF}),o.store(e).then((function(e){if("string"===typeof e.data&&"success"===e.data)return n({type:u.ti}),t.Am.success("Utilisateur ajouter avec suc\xe8ss."),Promise.resolve()}),(function(e){return t.Am.error("La sauvegarde de l'utilisateur a \xe9chou\xe9e."),Promise.reject()}))}},y=function(e){return function(n){n({type:u.oJ}),o.fetchOneUser(e).then((function(e){return n(function(e){return{type:u.Pf,payload:e}}(e)),Promise.resolve()}),(function(e){n({type:u.qw}),t.Am.error("Impossible de charger les information de l'utilisateur.")}))}},b=function(e){return function(n){o.switchStatus(e).then((function(r){201===r.status&&(n(function(e){return{type:u.eG,payload:e}}(e)),t.Am.success("Le status de l'utilisateur a \xe9t\xe9 changer."))}),(function(e){t.Am.error("Le status de l'utilisateur n'a pas \xe9t\xe9 changer.")}))}},N=function(e,n){return function(r){o.updateUser(e,n).then((function(e){200===e.status&&t.Am.success("L'utilisateur enregistrer avec sucess.")}),(function(e){console.log(e)}))}},U=function(e){return function(n,r){console.log(e);var t=r();n(x({})),console.log(t)}}},9262:function(e,n,r){r.r(n);var t,s=r(168),a=r(1413),i=r(5861),l=r(7757),c=r.n(l),o=r(1265),u=r(2791),d=r(1134),m=r(9860),f=r(4569),h=r.n(f),p=r(3197),x=r(6871),v=r(7669),g=r(7581),j=r(5751),y=r(184),b=j.ZP.div(t||(t=(0,s.Z)(["\n    display: flex;\n    padding: 1px 4px;\n    flex-wrap: wrap;\n\n    & > div {\n        flex-grow: 1;\n        height: 70px;\n        display: flex;\n        flex-direction: column;\n        padding:6px;\n    }\n\n    & > div > p {\n        height: 20px;\n        width: 30%;\n        animation: skeleton-loading 1s linear infinite alternate;\n        border-radius: 4px;\n        margin: 8px 0px;\n        @keyframes skeleton-loading {\n            0% {\n                background-color: hsl(200, 10%, 80%);\n            }\n    \n            100% {\n                background-color:  hsl(200, 20%, 95%);\n            }\n        }\n    }\n\n    & > div > div {\n        max-height: 35px;\n        border-radius: 4px;\n        height: 35px;\n        width: 100%;\n        animation: skeleton-loading 1s linear infinite alternate;\n        @keyframes skeleton-loading {\n            0% {\n                background-color: hsl(200, 10%, 80%);\n            }\n    \n            100% {\n                background-color:  hsl(200, 20%, 95%);\n            }\n        }\n    }\n"])));n.default=(0,g.$j)((function(e){return{users:e.users}}),(function(e){return{fetchOneUser:function(n){return e((0,v.Gl)(n))},updateUser:function(n,r){return e((0,v.zj)(n,r))}}}))((function(e){var n=e.users,r=e.fetchOneUser,t=e.updateUser,s=(0,x.UO)().uuid,l=(0,m.Ry)({firstname:(0,m.Z_)().required("Veuillez saisir votre Pr\xe9nom").typeError("Veuillez saisir des characters alphabetic."),lastname:(0,m.Z_)().required("Veuillez saisir votre Nom").typeError("Veuillez saisir des characters alphabetic."),email:(0,m.Z_)().email("Veuillez entrer une adresse email valid.").required("Veuillez entre votre email.").typeError("Veuillez entrer une adresse email valid.").test("check-if-user-exist","Il exist d\xe9j\xe0 un client avec cette email.",function(){var e=(0,i.Z)(c().mark((function e(n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0===n.length?"empty":n,e.next=3,h().get(p.T+"/check-if-email-exist/".concat(n,"/oneUser/").concat(s));case 3:return r=e.sent,e.abrupt("return",1!==r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),role:(0,m.nK)().oneOf(["1","3","2","4"],"Vous devez choisir parmis les options prescrit.").required("Veuillez choisir une option.").typeError("Vous devez choisir parmis les options prescrit.")}),f=(0,d.cI)({mode:"unTouched",resolver:(0,o.X)(l)}),v=f.register,g=f.formState,j=f.handleSubmit;(0,u.useEffect)((function(){r(s)}),[s,r]);var N=g.isSubmitting,U=g.errors;return(0,y.jsxs)("div",{className:"content-wrapper",children:[(0,y.jsx)("section",{className:"content-header",children:(0,y.jsx)("div",{className:"container-fluid",children:(0,y.jsxs)("div",{className:"row mb-2",children:[(0,y.jsx)("div",{className:"col-sm-6",children:(0,y.jsx)("h1",{children:"Modifier un Utilisateur"})}),(0,y.jsx)("div",{className:"col-sm-6",children:(0,y.jsxs)("ol",{className:"breadcrumb float-sm-right",children:[(0,y.jsx)("li",{className:"breadcrumb-item active",children:"Utilisateur"}),(0,y.jsx)("li",{className:"breadcrumb-item active",children:"Modifier un Utilisateur"})]})})]})})}),(0,y.jsx)("section",{className:"content",children:(0,y.jsx)("div",{className:"container-fluid",children:(0,y.jsx)("div",{className:"row",children:(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"card",children:[(0,y.jsx)("div",{className:"card-header",children:(0,y.jsx)("h3",{className:"card-title",children:"Modifier l'utilisateur"})}),n.oneUserLoading&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(b,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{}),(0,y.jsx)("div",{})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{}),(0,y.jsx)("div",{})]})]}),(0,y.jsxs)(b,{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{}),(0,y.jsx)("div",{})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{}),(0,y.jsx)("div",{})]})]})]}),!n.oneUserLoading&&!1===n.oneUserLoadingError&&n.oneUser.hasOwnProperty("uuid")&&(0,y.jsxs)("form",{onSubmit:j((function(e){t(e,s)})),children:[(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Pr\xe9nom"}),(0,y.jsx)("input",(0,a.Z)({type:"firstname",className:"form-control "+(U.firstname&&" is-border-red"),defaultValue:n.oneUser.first_name,placeholder:"Pr\xe9nom de l'utilisateur"},v("firstname"))),U.firstname&&(0,y.jsx)("small",{className:"form-text is-red",children:U.firstname.message})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Nom"}),(0,y.jsx)("input",(0,a.Z)({type:"lastname",className:"form-control "+(U.lastname&&"is-border-red"),placeholder:"Nom de l'utilisateur",defaultValue:n.oneUser.last_name},v("lastname"))),U.lastname&&(0,y.jsx)("small",{className:"form-text is-red",children:U.lastname.message})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email"}),(0,y.jsx)("input",(0,a.Z)({type:"email",className:"form-control "+(U.email&&"is-border-red"),placeholder:"Entre votre email",defaultValue:n.oneUser.email},v("email"))),U.email&&(0,y.jsx)("small",{className:"form-text is-red",children:U.email.message})]}),(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Role"}),(0,y.jsxs)("select",(0,a.Z)((0,a.Z)({className:"form-control "+(U.role&&"is-border-red")},v("role")),{},{defaultValue:n.oneUser.role_id,children:[(0,y.jsx)("option",{value:"1",children:"Administrateur"}),(0,y.jsx)("option",{value:"2",children:"Client"}),(0,y.jsx)("option",{value:"3",children:"Agent"}),(0,y.jsx)("option",{value:"4",children:"Salari\xe9"})]})),U.role&&(0,y.jsx)("small",{className:"form-text text-muted is-danger",children:U.role.message})]})]}),(0,y.jsx)("div",{className:"card-footer",children:(0,y.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:N,children:N?"Sauvegarde en cours...":"Enregistrer"})})]})]})})})})})]})}))}}]);
//# sourceMappingURL=262.c1aad6cb.chunk.js.map